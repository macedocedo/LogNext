<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!--=============== FAVICON ===============-->
  <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon" />

  <!--=============== BOXICONS ===============-->
  <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css" />

  <!--=============== SWIPER CSS ===============--> 
  <link rel="stylesheet" href="./css/swiper-bundle.min.css" />

  <!--=============== CSS ===============-->
  <link rel="stylesheet" href="./css/styles1.css" />

  <title>AppLogNext</title>

<style>
  :root {
    --primary-color: #000000;
    --accent-color: #45a049;
    --text-color: #333;
    --bg-color: #f5f5f5;
    --card-bg: #ffffff;
    --input-border: #ccc;
    --button-text: #fff;
    --delete-bg: #e53935;
    --edit-bg: #43a047;
  }

  body.dark-theme {
    --primary-color: #fdfdfd;
    --accent-color: #1d8f5a;
    --text-color: #e0e0e0;
    --bg-color: #121212;
    --card-bg: #1e1e1e;
    --input-border: #444;
    --button-text: #000;
    --delete-bg: #ef5350;
    --edit-bg: #66bb6a;
  }

  * {
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: var(--bg-color);
    color: var(--text-color);
    padding: 20px;
    max-width: 500px;
    margin: auto;
  }

  h1 {
    text-align: center;
    color: var(--primary-color);
    margin-bottom: 30px;
  }

  label {
    display: block;
    margin-top: 20px;
    font-size: 16px;
    font-weight: 600;
  }

  input,
  select {
    width: 100%;
    padding: 12px;
    margin-top: 8px;
    margin-bottom: 16px;
    border-radius: 12px;
    border: 1px solid var(--input-border);
    font-size: 16px;
    box-sizing: border-box;
    background-color: var(--card-bg);
    color: var(--text-color);
  }

  input:focus,
  select:focus {
    border-color: var(--primary-color);
    outline: none;
  }

  button {
    width: 100%;
    background-color: var(--primary-color);
    color: var(--button-text);
    border: none;
    padding: 14px;
    border-radius: 12px;
    font-size: 16px;
    cursor: pointer;
  }

  button:hover {
    background-color: var(--accent-color);
  }

  .saved-data {
    background-color: var(--card-bg);
    padding: 24px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    margin-top: 20px;
  }

  ul#data-list {
    list-style: none;
    padding: 0;
    margin-top: 20px;
  }

  ul#data-list li {
    background: var(--card-bg);
    padding: 16px;
    margin-bottom: 12px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    font-size: 15px;
    position: relative;
  }

  .action-btns {
    margin-top: 10px;
    display: flex;
    gap: 10px;
  }

  .action-btns button {
    flex: 1;
    font-size: 14px;
    padding: 10px;
    border-radius: 8px;
  }

  .delete-btn {
    background-color: var(--delete-bg);
    color: #fff;
  }

  .edit-btn {
    background-color: var(--edit-bg);
    color: #fff;
  }

  /* Ícone de tema */
  .nav__btns i {
    font-size: 24px;
    cursor: pointer;
    color: var(--text-color);
  }

.lucro-total-box {
  margin-top: 24px;
  padding: 20px;
  background-color: var(--card-bg);
  border-left: 6px solid var(--primary-color);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  font-size: 18px;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--text-color);
}
.lucro-total-box strong {
  color: var(--primary-color);
  font-size: 20px;
}

.lucro-total-box {
  margin-top: 24px;
  padding: 20px;
  background-color: var(--card-bg);
  border-left: 6px solid var(--primary-color);
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  font-size: 18px;
  font-weight: 600;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--text-color);
  gap: 10px;
}

.lucro-total-box strong {
  color: var(--primary-color);
  font-size: 20px;
}

</style>

</head>
<body>
  <!--==================== HEADER ====================-->
  <header class="header" id="header">
    <nav class="nav container">
      <a href="index.html" class="nav__logo">
        <img src="assets/img/favicon.png" alt="" class="nav__logo-img" />
        LogNext
      </a>

      <div class="nav__menu" id="nav-menu">
        <ul class="nav__list">
          <li class="nav__item"><a href="index.html" class="nav__link active-link">Início</a></li>
          <li class="nav__item"><a href="Lista.html" class="nav__link">Lista</a></li>
          <li class="nav__item"><a href="Estoque-Saida.html" class="nav__link">Saida</a></li>
          <li class="nav__item"><a href="Estoque-Entrada.html" class="nav__link">Entrada</a></li>
        </ul>

        <div class="nav__close" id="nav-close">
          <i class="bx bx-x"></i>
        </div>

        <img src="assets/img/nav-light.png" alt="" class="nav__img" />
      </div>
      <div class="nav__btns">
        <!-- Theme change button -->
        <i class="bx bx-moon change-theme" id="theme-button"></i>
        <!-- Toggle button -->
        <div class="nav__toggle" id="nav-toggle">
          <i class="bx bx-grid-alt"></i>
        </div>
      </div>
    </nav>
  </header>

  <!--==================== CONTEÚDO ====================-->
  <h1>Calculo de Lucro/h1>


  <div class="saved-data">

    <label for="valor-custo">Valor de Custo (R$):</label>
    <input type="number" id="valor-custo" step="0.01" min="0" placeholder="0,00" />

    <label for="percentual-lucro">% de Lucro (%):</label>
    <input type="number" id="percentual-lucro" step="0.01" min="0" placeholder="0,00" />

    <label for="valor-lucro-liquido">Valor de Lucro Líquido (R$):</label>
    <input type="text" id="valor-lucro-liquido" readonly placeholder="0,00" />

    
  </div>


<div class="lucro-total-box">
  <div>
    <span>Total do Lucro Líquido:</span><br />
    <strong id="lucro-total">R$ 0,00</strong>
  </div>
  <div style="text-align: right;">
    <span>Lucro sobre o Custo:</span><br />
    <strong id="lucro-percentual">0%</strong>
  </div>
</div>


  <script>

    let stockData = JSON.parse(localStorage.getItem("estoqueData")) || [];
    let editIndex = -1;

    function formatCurrency(value) {
      value = value.replace(/\D/g, "");
      value = (parseFloat(value) / 100).toFixed(2) + "";
      value = value.replace(".", ",");
      value = value.replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1.");
      return "R$ " + value;
    }

    

    function saveStock() {
      const name = document.getElementById("item-name").value.trim();
      const quantity = parseInt(document.getElementById("quantity").value);
      let valorInput = document.getElementById("valor").value.trim();
      const notes = document.getElementById("notes").value.trim();
      const operation = document.getElementById("operation-type").value;
      const date = new Date().toLocaleString();

      if (!name || !quantity || !valorInput || !operation) {
        alert("Preencha todos os campos obrigatórios!");
        return;
      }

      const valor = formatCurrency(valorInput);
      const entry = { name, quantity, valor, notes, operation, date };

      if (editIndex === -1) {
        stockData.push(entry);
      } else {
        stockData[editIndex] = entry;
        editIndex = -1;
        document.getElementById("save-btn").textContent = "Adicionar";
        document.getElementById("cancel-btn").style.display = "none";
      }

      localStorage.setItem("estoqueData", JSON.stringify(stockData));
      updateStockList();
      clearInputs();
    }

    function editStock(index) {
      const item = stockData[index];
      document.getElementById("item-name").value = item.name;
      document.getElementById("quantity").value = item.quantity;
      // Reverte a formatação para edição
      document.getElementById("valor").value = item.valor
        .replace("R$ ", "")
        .replace(/\./g, "")
        .replace(",", ".");
      document.getElementById("notes").value = item.notes || "";
      document.getElementById("operation-type").value = item.operation;

      editIndex = index;
      document.getElementById("save-btn").textContent = "Salvar Alterações";
      document.getElementById("cancel-btn").style.display = "inline-block";
    }

    function cancelEdit() {
      editIndex = -1;
      clearInputs();
      document.getElementById("save-btn").textContent = "Adicionar";
      document.getElementById("cancel-btn").style.display = "none";
    }

    function deleteStock(index) {
      if (confirm("Deseja excluir este item?")) {
        stockData.splice(index, 1);
        localStorage.setItem("estoqueData", JSON.stringify(stockData));
        updateStockList();
      }
    }

    function clearInputs() {
      document.getElementById("item-name").value = "";
      document.getElementById("quantity").value = "";
      document.getElementById("valor").value = "";
      document.getElementById("notes").value = "";
      document.getElementById("operation-type").selectedIndex = 0;
    }

    // Atualiza a lista com base no filtro atual
    function updateStockList() {
      filterStockList();
    }

   

    document.addEventListener("DOMContentLoaded", function () {
      updateStockList();
    });

// Função para formatar número como moeda brasileira
function formatCurrencyBR(value) {
  return "R$ " + value.toFixed(2).replace(".", ",");
}

function calcularLucroLiquido() {
  const custo = parseFloat(document.getElementById("valor-custo").value) || 0;
  const percentual = parseFloat(document.getElementById("percentual-lucro").value) || 0;
  const lucroLiquido = custo * (percentual / 100);

  const valorFormatado = formatCurrencyBR(lucroLiquido);
  const percentualFormatado = percentual.toFixed(2).replace(".", ",") + "%";

  document.getElementById("valor-lucro-liquido").value = valorFormatado;

  // Atualiza as duas caixas
  document.getElementById("lucro-total").textContent = valorFormatado;
  const lucroTotal2 = document.getElementById("lucro-total-2");
  if (lucroTotal2) lucroTotal2.textContent = valorFormatado;

  document.getElementById("lucro-percentual").textContent = percentualFormatado;
}





// Adiciona eventos para recalcular lucro sempre que os campos mudarem
document.getElementById("valor-custo").addEventListener("input", calcularLucroLiquido);
document.getElementById("percentual-lucro").addEventListener("input", calcularLucroLiquido);


  </script>

  <!--=============== SCROLL REVEAL ===============-->
  <script src="./js/scrollreveal.min.js"></script>

  <!--=============== SWIPER JS ===============-->
  <script src="./js/swiper-bundle.min.js"></script>

  <!--=============== MAIN JS ===============-->
  <script src="./js/main.js"></script>
</body>
</html>
